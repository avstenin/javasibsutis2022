# Основы разработки ПО при помощи Java

## Весенний семестр. 2021-2022 гг.

Ковалев Максим Игоревич, гр. ИВ-923.

## Лабораторная работа №5. СУБД

Результат лабораторной работы: проект на Java, предоставляющий **консольный пользовательский интерфейс к БД PostgreSQL, где содержатся записи телефонного справочника** *(фамилия, имя, телефон, необязательно e-mail)*.

## Сборка/использование

Для компиляции проекта и повторения тестовых условий необходимы:
* **[Gradle](https://gradle.org/)** (не менее версии 7);
* **[Docker](https://www.docker.com/)**.

Необходимо провести деплой образа PostgreSQL через **Docker Compose**:
```bash
$ docker-compose up
```

При желании можно вручную установить PostgreSQL и использовать [эти настройки](./sql/phonebase.sql). Проект взаимодействует с БД по стандартному для него порту `5432`.

Далее требуется лишь запустить проект:
```bash
$ gradle run
```

Для сборки полного JAR со всеми зависимостями:
```bash
$ gradle uberJar
```

По умолчанию полный архив находится по пути `./build/libs`.

Дальнейшее использование проводится через консоль. Будет автоматически выведена инструкция по пользованию интерфейсом.

## Структура программы

<table>
  <tr>
    <th><code>phonebase.CLI</code></th>
    <td>Входной пункт в программу. Инициализируется интерфейс для взаимодействия с БД <code>phonebase.PostgresUI</code> и передаётся далее в консольный I/O <code>phonebase.ConsoleUI</code>.</td>
  </tr>
  <tr>
    <th><code>phonebase.ConsoleUI</code></th>
    <td>Статический класс консольного I/O. Принимает от пользователя команды и аргументы к ним, сводит их с соответствующим методом согласно хэш-таблице. Если синтаксис ввода неправильный, выводится команда <code>help</code> (по одной команде либо по всем).</td>
  </tr>
  <tr>
    <th><code>phonebase.DBUI</code></th>
    <td>Интерфейс для взаимодействия с БД, расширяет интерфейс <code>AutoCloseable</code>. Требует реализации методов <code>insert</code> <i>(для вставки записи в БД)</i>, <code>selectAll</code> <i>(для извлечения всех записей)</i> и <code>find</code> <i>(для извлечения записей согласно фильтрам)</i>.</td>
  </tr>
  <tr>
    <th><code>phonebase.PostgresUI</code></th>
    <td>Класс, имплементирующий <code>phonebase.DBUI</code>. Определяет взаимодействие с PostgreSQL по определённому адресу.</td>
  </tr>
  <tr>
    <th><code>phonebase.PhoneRecord</code></th>
    <td>Датакласс, используемый внутри программы. Представляет собой запись из значений, используемых в БД: <code>FirstName</code>, <code>LastName</code>, <code>Phone</code>, <code>EMail</code>. Поля <code>EMail</code> и <code>Phone</code> допускаются быть пустыми.</td>
  </tr>
</table>